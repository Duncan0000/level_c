<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cç´šé‹å‹•æŒ‰æ‘© å­¸ç§‘æ¸¬é©—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #FDF6E3;
        }

        /* é¦¬å¡é¾è‰²ç³» */
        .macaron-pink { background-color: #FFB7B2; }
        .macaron-green { background-color: #B5EAD7; }
        .macaron-purple { background-color: #C7CEEA; }
        .macaron-yellow { background-color: #FFFFB5; }
        .macaron-blue { background-color: #A0E7E5; }
        
        .option-card {
            transition: all 0.2s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .option-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .option-card.selected {
            border-color: #FF9AA2;
            background-color: #FFF0F0;
        }

        .btn-nav {
            transition: transform 0.1s;
        }
        .btn-nav:active {
            transform: scale(0.95);
        }
        
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-2 md:p-4">

    <div id="app" class="w-full max-w-4xl bg-white rounded-3xl shadow-2xl overflow-hidden min-h-[750px] flex flex-col relative border-8 border-[#FFDAC1]">
        
        <!-- Header -->
        <div id="quiz-header" class="hidden bg-[#FFDAC1] p-4 flex justify-between items-center sticky top-0 z-10">
            <h2 class="text-xl font-bold text-gray-700">Q <span id="current-question-num">1</span> / <span id="total-question-num">20</span></h2>
            <div class="bg-white px-4 py-2 rounded-full shadow-sm text-lg font-mono font-bold text-[#FF9AA2] flex items-center gap-2">
                â±ï¸ <span id="timer">00:00</span>
            </div>
        </div>

        <!-- 1. Start Screen -->
        <div id="start-screen" class="flex-1 flex flex-col items-center justify-center p-8 text-center bg-gradient-to-b from-white to-[#FFF5E6]">
            <h1 class="text-4xl md:text-5xl font-black mb-4 text-[#FF9AA2] tracking-wider drop-shadow-sm">
                LEVEL C
            </h1>
            <h2 class="text-3xl md:text-4xl font-bold text-gray-700 mb-8 leading-tight">
                Cç´šé‹å‹•æŒ‰æ‘©<br>å­¸ç§‘æ¸¬é©—
            </h2>
            
            <div class="bg-white px-8 py-6 rounded-2xl shadow-sm mb-12 border-2 border-[#B5EAD7] w-full max-w-xl">
                <p class="text-lg text-gray-500 font-bold mb-2">é¡Œåº«ä¾†æºï¼š</p>
                <p class="text-2xl font-black text-[#FF9AA2] leading-snug mb-4">ä¸­è¯æ°‘åœ‹é‹å‹•ä¿ƒé€²å”æœƒ<br>å®˜æ–¹è¬›ç¾©</p>
                
                <div class="w-full h-0.5 bg-gray-100 my-4"></div>
                
                <div class="flex justify-center items-center gap-2 text-gray-600 font-bold text-lg">
                    <span>ğŸ“ é¡Œæ•¸ï¼š20é¡Œ</span>
                    <span class="text-gray-300">|</span>
                    <span>ğŸ¯ åŠæ ¼åˆ†æ•¸ï¼š70</span>
                </div>
            </div>
            
            <div class="grid grid-cols-2 gap-4 mb-10 opacity-80">
                <div class="w-12 h-12 rounded-full macaron-green animate-bounce delay-100"></div>
                <div class="w-12 h-12 rounded-full macaron-purple animate-bounce delay-300"></div>
                <div class="w-12 h-12 rounded-full macaron-yellow animate-bounce delay-500"></div>
                <div class="w-12 h-12 rounded-full macaron-blue animate-bounce delay-700"></div>
            </div>

            <button onclick="startQuiz(20)" class="btn-nav text-3xl font-bold text-white bg-[#FFB7B2] hover:bg-[#FF9AA2] px-16 py-6 rounded-full shadow-lg transform hover:-translate-y-1 transition-all duration-300">
                é–‹å§‹æ¸¬é©—
            </button>
        </div>

        <!-- 2. Quiz Screen -->
        <div id="quiz-screen" class="hidden flex-1 flex flex-col p-6 md:p-8 h-full overflow-hidden">
            <div class="flex-1 overflow-y-auto no-scrollbar pb-4">
                <div id="question-text" class="text-2xl md:text-3xl font-bold text-gray-800 mb-6 leading-snug">
                    é¡Œç›®è¼‰å…¥ä¸­...
                </div>
                
                <!-- Options Container -->
                <div id="options-container" class="space-y-3">
                    <!-- Options will be injected here -->
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="flex justify-between items-center mt-4 pt-4 border-t border-gray-100 bg-white z-10">
                <button id="prev-btn" onclick="prevQuestion()" class="btn-nav hidden text-lg font-bold text-gray-600 bg-gray-200 hover:bg-gray-300 px-6 py-3 rounded-xl">
                    ä¸Šä¸€é 
                </button>
                <div class="flex-1"></div>
                <button id="next-btn" onclick="nextQuestion()" class="btn-nav text-lg font-bold text-white bg-[#B5EAD7] hover:bg-[#A0E8D0] text-gray-700 px-6 py-3 rounded-xl shadow-md">
                    ä¸‹ä¸€é 
                </button>
                <button id="submit-btn" onclick="submitQuiz()" class="btn-nav hidden text-lg font-bold text-white bg-[#FFB7B2] hover:bg-[#FF9AA2] px-6 py-3 rounded-xl shadow-md">
                    ç¹³äº¤è©¦å·
                </button>
            </div>
        </div>

        <!-- 3. Result Screen -->
        <div id="result-screen" class="hidden flex-1 flex flex-col p-8 overflow-y-auto bg-gray-50">
            <div class="text-center mb-10">
                <h2 class="text-4xl font-bold text-gray-800 mb-2">æ¸¬é©—çµæœ</h2>
                
                <!-- Pass/Fail Badge -->
                <div id="pass-fail-badge" class="inline-block px-6 py-2 rounded-full text-xl font-bold mb-6">
                    <!-- Javascript will fill this -->
                </div>

                <div class="flex justify-center items-center gap-6 mb-6">
                    <div class="bg-white p-5 rounded-2xl shadow-md border-b-4 border-[#FFB7B2] w-32">
                        <p class="text-gray-500 text-sm">å¾—åˆ†</p>
                        <p id="score-display" class="text-5xl font-black text-[#FF9AA2]">0</p>
                    </div>
                    <div class="bg-white p-5 rounded-2xl shadow-md border-b-4 border-[#B5EAD7] w-32">
                        <p class="text-gray-500 text-sm">è€—æ™‚</p>
                        <p id="time-display" class="text-2xl font-bold text-[#7BC5AE]">00:00</p>
                    </div>
                </div>
                <button onclick="restartQuiz()" class="text-xl font-bold text-white bg-[#C7CEEA] hover:bg-[#AAB6E6] px-10 py-3 rounded-full shadow-md transition-colors">
                    å›é¦–é 
                </button>
            </div>

            <div class="max-w-3xl mx-auto w-full">
                <h3 class="text-2xl font-bold text-gray-700 mb-6 border-l-8 border-[#FFFFB5] pl-4">è©³ç´°è§£æ</h3>
                <div id="review-container" class="space-y-6">
                    <!-- Review items injected here -->
                </div>
            </div>
        </div>

    </div>

    <script>
        // --- Data: Optimized Question Bank (Mid-Level Difficulty) ---
        const coreQuestionBank = [
            {
                question: "è‚Œç­‹è†œ (Myofascia) æœ€é‡è¦çš„ç‰¹æ€§æ˜¯ä»€éº¼ï¼Ÿ",
                options: ["å®ƒæ˜¯ä¸€å¼µå¾é ­åˆ°è…³é€£çºŒä¸æ–·ã€ç«‹é«”çš„å¼µåŠ›ç¶²çµ¡", "å®ƒæ˜¯ä¸€å¡Šå¡Šç¨ç«‹åˆ†é–‹çš„è‚Œè‚‰çµ„ç¹”", "å®ƒåªå­˜åœ¨æ–¼é—œç¯€è™•ï¼Œç”¨ä¾†é€£æ¥éª¨é ­", "å®ƒæ˜¯äººé«”æœ€å°çš„ç´°èƒå–®ä½"],
                answer: "å®ƒæ˜¯ä¸€å¼µå¾é ­åˆ°è…³é€£çºŒä¸æ–·ã€ç«‹é«”çš„å¼µåŠ›ç¶²çµ¡",
                explanation: "è‚Œç­‹è†œä¸åªæ˜¯åŒ…è£¹è‚Œè‚‰çš„è†œï¼Œå®ƒæ˜¯é€£çºŒæ€§çš„å…¨èº«ç¶²çµ¡ã€‚é€™å°±æ˜¯ç‚ºä»€éº¼æ”¾é¬†å°è…¿å¯èƒ½æ”¹å–„èƒŒç—›çš„åŸå› ï¼ˆç‰½ä¸€é«®å‹•å…¨èº«ï¼‰ã€‚"
            },
            {
                question: "é—œæ–¼ã€Œé«‚è„›æŸ (IT Band)ã€ï¼Œä¸‹åˆ—å“ªä¸€å€‹è§€å¿µæ˜¯æ­£ç¢ºçš„ï¼Ÿ",
                options: ["å®ƒä¸æ˜¯è‚Œè‚‰ï¼Œç„¡æ³•ä¸»å‹•æ”¶ç¸®ï¼Œåƒæ˜¯ä¸€æ¢å …éŸŒçš„çºœç¹©", "å®ƒæ˜¯å¤§è…¿æœ€æœ‰åŠ›çš„è‚Œè‚‰ï¼Œå¯ä»¥ä¸»å‹•ç”¨åŠ›", "å®ƒä¸»è¦è² è²¬å¸æ”¶é¤Šåˆ†", "å®ƒä½æ–¼å¤§è…¿å…§å´ï¼Œè² è²¬å¤¾è…¿"],
                answer: "å®ƒä¸æ˜¯è‚Œè‚‰ï¼Œç„¡æ³•ä¸»å‹•æ”¶ç¸®ï¼Œåƒæ˜¯ä¸€æ¢å …éŸŒçš„çºœç¹©",
                explanation: "é«‚è„›æŸæ˜¯çµç· çµ„ç¹”ï¼ˆç­‹è†œï¼‰ï¼Œå®ƒä¸æœƒè‡ªå·±å‹•ã€‚å®ƒçš„ç·Šç¹ƒé€šå¸¸æ˜¯è¢«ä¸Šé¢çš„è‚Œè‚‰ï¼ˆé—Šç­‹è†œå¼µè‚Œã€è‡€å¤§è‚Œï¼‰æ‹‰ç·Šçš„ã€‚"
            },
            {
                question: "ç¾ä»£äººå¸¸è¦‹çš„ã€Œè‡€è‚Œå¤±æ†¶ç—‡ã€ï¼Œä¸»è¦åŸå› èˆ‡å¾Œæœç‚ºä½•ï¼Ÿ",
                options: ["ä¹…åå°è‡´è‡€è‚Œé•·æœŸè¢«æ‹‰é•·ç„¡åŠ›ï¼Œå¤§è…¦å¿˜è¨˜å¾µå¬å®ƒï¼Œæ”¹ç”±è…¿å¾Œè‚Œä»£å„Ÿ", "æ·±è¹²ç·´å¤ªå¤šå°è‡´è‡€è‚Œéå‹", "è·‘æ­¥å§¿å‹¢éŒ¯èª¤å°è‡´è‡€è‚Œå—å‚·", "ç¡è¦ºæ™‚é–“å¤ªå°‘å°è‡´è‚Œè‚‰èç¸®"],
                answer: "ä¹…åå°è‡´è‡€è‚Œé•·æœŸè¢«æ‹‰é•·ç„¡åŠ›ï¼Œå¤§è…¦å¿˜è¨˜å¾µå¬å®ƒï¼Œæ”¹ç”±è…¿å¾Œè‚Œä»£å„Ÿ",
                explanation: "ã€Œä¹…åã€æ˜¯æ®ºæ‰‹ã€‚ç•¶è‡€å¤§è‚Œç½·å·¥ï¼Œå¤§è…¦åªå¥½å«è…¿å¾Œè‚Œæˆ–è…°éƒ¨è‚Œè‚‰ä¾†å¹«å¿™ï¼ˆå”åŒè‚Œä¸»å°ï¼‰ï¼Œå¸¸å°è‡´è…°ç— èƒŒç—›ã€‚"
            },
            {
                question: "ã€Œæ¢¨ç‹€è‚Œã€å¦‚æœå¤ªç·Šç¹ƒï¼Œæœ€å®¹æ˜“é€ æˆä»€éº¼å•é¡Œï¼Ÿ",
                options: ["å£“è¿«åéª¨ç¥ç¶“ï¼Œå°è‡´å±è‚¡æˆ–è…¿éƒ¨éº»ç—›ï¼ˆå‡æ€§åéª¨ç¥ç¶“ç—›ï¼‰", "å°è‡´è†è“‹ç©æ°´", "é€ æˆè…³è¸æ‰­å‚·", "å¼•èµ·æ¶ˆåŒ–ä¸è‰¯"],
                answer: "å£“è¿«åéª¨ç¥ç¶“ï¼Œå°è‡´å±è‚¡æˆ–è…¿éƒ¨éº»ç—›ï¼ˆå‡æ€§åéª¨ç¥ç¶“ç—›ï¼‰",
                explanation: "åéª¨ç¥ç¶“å‰›å¥½å¾æ¢¨ç‹€è‚Œä¸‹æ–¹ç©¿éã€‚æ¢¨ç‹€è‚Œä¸€ç·Šï¼Œå°±åƒå¤¾å­ä¸€æ¨£å¤¾ä½ç¥ç¶“ï¼Œç—‡ç‹€è·Ÿæ¤é–“ç›¤çªå‡ºå¾ˆåƒã€‚"
            },
            {
                question: "é€²è¡Œæ»¾ç­’æ”¾é¬† (SMR) æ™‚ï¼Œå“ªä¸€ç¨®æƒ…æ³æ˜¯çµ•å°ç¦æ­¢æŒ‰å£“çš„ï¼Ÿ",
                options: ["éª¨æŠ˜ã€é–‹æ”¾æ€§å‚·å£ã€æ·±å±¤éœè„ˆæ “å¡æˆ–æ€¥æ€§ç™¼ç‚æ™‚", "é‹å‹•å¾Œè¦ºå¾—è‚Œè‚‰æœ‰é»ç·Šçš„æ™‚å€™", "ç¡è¦ºå‰æƒ³æ”¾é¬†çš„æ™‚å€™", "æ„Ÿè¦ºè‚Œè‚‰æœ‰æ°£çµçš„æ™‚å€™"],
                answer: "éª¨æŠ˜ã€é–‹æ”¾æ€§å‚·å£ã€æ·±å±¤éœè„ˆæ “å¡æˆ–æ€¥æ€§ç™¼ç‚æ™‚",
                explanation: "å—å‚·æœ€åš´é‡ã€çµæ§‹å—ææˆ–æœ‰è¡€æ “é¢¨éšªæ™‚ï¼Œäº‚æŒ‰åªæœƒè®“å‚·å‹¢æƒ¡åŒ–æˆ–é€ æˆå±éšªã€‚è«‹å°‹æ±‚é†«å¸«å”åŠ©ã€‚"
            },
            {
                question: "è‡€å¤§è‚Œ (Gluteus Maximus) çš„ä¸»è¦åŠŸèƒ½æ˜¯ä»€éº¼ï¼Ÿ",
                options: ["å°‡å¤§è…¿å‘å¾Œä¼¸å±• (Hip Extension) èˆ‡å¤–æ—‹", "å°‡å¤§è…¿å‘å…§å¤¾ (Adduction)", "å°‡å¤§è…¿å‘ä¸ŠæŠ¬é«˜ (Flexion)", "æ§åˆ¶è†è“‹å½æ›²"],
                answer: "å°‡å¤§è…¿å‘å¾Œä¼¸å±• (Hip Extension) èˆ‡å¤–æ—‹",
                explanation: "è‡€å¤§è‚Œè² è²¬è®“æˆ‘å€‘å¾åå§¿ç«™èµ·ä¾†ã€çˆ¬æ¨“æ¢¯ã€å°‡è…¿å¾€å¾Œè¸¢ï¼ŒåŒæ™‚ä¹Ÿæ˜¯å¼·åŠ›çš„å¤–æ—‹è‚Œã€‚"
            },
            {
                question: "ç‚ºä»€éº¼èªªè‚Œç­‹è†œæ˜¯èº«é«”æœ€å¤§çš„ã€Œæ„Ÿè¦ºå™¨å®˜ã€ï¼Ÿ",
                options: ["å› ç‚ºå®ƒå¯Œå«ç¥ç¶“æœ«æ¢¢ï¼Œèƒ½éš¨æ™‚å›å ±èº«é«”çš„å§¿å‹¢èˆ‡å¼µåŠ›", "å› ç‚ºå®ƒè² è²¬å‚³éç—›è¦ºçµ¦çš®è†š", "å› ç‚ºå®ƒé¢ç©æœ€å¤§", "å› ç‚ºå®ƒèƒ½æ„Ÿè¦ºæº«åº¦è®ŠåŒ–"],
                answer: "å› ç‚ºå®ƒå¯Œå«ç¥ç¶“æœ«æ¢¢ï¼Œèƒ½éš¨æ™‚å›å ±èº«é«”çš„å§¿å‹¢èˆ‡å¼µåŠ›",
                explanation: "ç­‹è†œè£¡æœ‰å¤§é‡çš„æ„Ÿæ¸¬å™¨ï¼ˆå¦‚è‚Œæ¢­ã€é«˜åŸºæ°è…±å™¨ï¼‰ï¼Œéš¨æ™‚å‘Šè¨´å¤§è…¦ã€Œæˆ‘å€‘ç¾åœ¨å§¿å‹¢æ­ªäº†æ²’ã€ã€ã€Œè‚Œè‚‰ç·Šä¸ç·Šã€ã€‚"
            },
            {
                question: "åœ¨æ»¾ç­’æ”¾é¬†æ™‚ï¼Œæ‰¾åˆ°æ¿€ç—›é»ï¼ˆç— ç—›é»ï¼‰å¾Œçš„æ­£ç¢ºæ“ä½œæ˜¯ï¼Ÿ",
                options: ["åœ¨ç—›é»åœç•™ 30-60 ç§’ï¼Œä¿æŒå‘¼å¸ç­‰å¾…æ”¾é¬†", "å¿«é€Ÿä¾†å›ç”¨åŠ›æ»¾å‹•ï¼Œè¶Šç—›è¶Šå¥½", "ç«‹åˆ»æ›ä½ç½®ï¼Œä¸è¦ç†å®ƒ", "ç”¨åŠ›æ•²æ‰“å®ƒ"],
                answer: "åœ¨ç—›é»åœç•™ 30-60 ç§’ï¼Œä¿æŒå‘¼å¸ç­‰å¾…æ”¾é¬†",
                explanation: "æ”¾é¬†éœ€è¦æ™‚é–“ã€‚æŒçºŒç©©å®šçš„å£“åŠ›èƒ½å•Ÿå‹•ç¥ç¶“ç³»çµ±çš„ã€Œè‡ªé«”æŠ‘åˆ¶ã€æ©Ÿåˆ¶ï¼Œè®“è‚Œè‚‰æ…¢æ…¢é¬†é–‹ã€‚å¤ªå¿«æˆ–å¤ªç—›åè€Œæœƒè®“è‚Œè‚‰æ›´ç·Šç¹ƒã€‚"
            },
            {
                question: "ã€Œåœ“è‚©ã€é«”æ…‹ï¼ˆè‚©è†€å…§ç¸®ï¼‰çš„äººï¼Œé€šå¸¸å“ªä¸€çµ„è‚Œè‚‰éæ–¼ç·Šç¹ƒéœ€è¦æ”¾é¬†ï¼Ÿ",
                options: ["èƒ¸å¤§è‚Œèˆ‡èƒ¸å°è‚Œ", "è±å½¢è‚Œèˆ‡ä¸­æ–œæ–¹è‚Œ", "é—ŠèƒŒè‚Œ", "è‚±ä¸‰é ­è‚Œ"],
                answer: "èƒ¸å¤§è‚Œèˆ‡èƒ¸å°è‚Œ",
                explanation: "å‰å´çš„èƒ¸è‚Œé€£åœ¨è‚‹éª¨å’Œè‚©è†€ä¸Šï¼Œå¤ªç·Šå°±æœƒæŠŠè‚©è†€å¾€å‰æ‹‰ã€‚æƒ³æ”¹å–„åœ“è‚©ï¼Œæ”¾é¬†èƒ¸è‚Œæ˜¯ç¬¬ä¸€æ­¥ã€‚"
            },
            {
                question: "å¦‚æœåœ¨é€²è¡Œã€Œé«–å…§æ”¶æ¸¬è©¦ã€æ™‚ï¼Œè…³æ”¾ä¸ä¸‹å»ï¼ˆå¡åœ¨åŠç©ºä¸­ï¼‰ï¼Œé€šå¸¸ä»£è¡¨å“ªè£¡å¤ªç·Šï¼Ÿ",
                options: ["å¤§è…¿å¤–å´çš„é«‚è„›æŸ (ITB) æˆ–é—Šç­‹è†œå¼µè‚Œ (TFL)", "å¤§è…¿å…§å´çš„å…§æ”¶è‚Œ", "è‚šå­å¤ªå°", "å°è…¿å¾Œå´"],
                answer: "å¤§è…¿å¤–å´çš„é«‚è„›æŸ (ITB) æˆ–é—Šç­‹è†œå¼µè‚Œ (TFL)",
                explanation: "é€™å°±åƒé¼“çš®ç¹ƒå¤ªç·Šä¸€æ¨£ã€‚å¤§è…¿å¤–å´å¤ªç·Šï¼ˆTFL/ITBï¼‰ï¼Œå°±æœƒæ‹‰ä½å¤§è…¿ï¼Œè®“å®ƒæ²’è¾¦æ³•é †åˆ©åšå…§æ”¶ï¼ˆå¾€å…§æ‰ï¼‰çš„å‹•ä½œã€‚"
            },
            {
                question: "è‹¥å¤§è…¿å‰å´çš„ã€Œé—Šç­‹è†œå¼µè‚Œ (TFL)ã€å¤ªç·Šï¼Œèµ°è·¯æˆ–æ·±è¹²æ™‚å®¹æ˜“å‡ºç¾ä»€éº¼ä»£å„Ÿï¼Ÿ",
                options: ["å¤§è…¿ä¸è‡ªè¦ºå¾€å¤–è½‰ï¼ˆè…³å°–æœå¤–æ’‡ï¼‰", "å¤§è…¿å…§å…«", "è†è“‹é–æ­»", "éª¨ç›†å¾Œå‚¾"],
                answer: "å¤§è…¿ä¸è‡ªè¦ºå¾€å¤–è½‰ï¼ˆè…³å°–æœå¤–æ’‡ï¼‰",
                explanation: "TFL å¤ªç·Šæœƒæ‹‰æ‰¯é«‚è„›æŸï¼Œä¸¦åœ¨å‹•ä½œä¸­ç”¢ç”Ÿæ—‹è½‰åŠ›çŸ©ï¼Œè®“å¤§è…¿éª¨ä¸ç”±è‡ªä¸»åœ°å¾€å¤–è½‰ï¼ˆå¤–æ—‹ï¼‰ã€‚"
            },
            {
                question: "ã€Œç¶²çƒè‚˜ã€é›–ç„¶ç—›åœ¨æ‰‹è‚˜ï¼Œä½†å…¶å¯¦é€šå¸¸æ˜¯å“ªè£¡çš„è‚Œè‚‰éåº¦ä½¿ç”¨é€ æˆçš„ï¼Ÿ",
                options: ["å‰è‡‚ä¼¸è…•è‚Œç¾¤ï¼ˆæ§åˆ¶æ‰‹èƒŒå¾€ä¸Šç¿¹çš„è‚Œè‚‰ï¼‰", "ä¸Šæ‰‹è‡‚çš„äºŒé ­è‚Œ", "è‚©è†€çš„ä¸‰è§’è‚Œ", "èƒ¸è‚Œ"],
                answer: "å‰è‡‚ä¼¸è…•è‚Œç¾¤ï¼ˆæ§åˆ¶æ‰‹èƒŒå¾€ä¸Šç¿¹çš„è‚Œè‚‰ï¼‰",
                explanation: "æ‰“é›»è…¦ã€æ“°æ¯›å·¾éƒ½æœƒç”¨åˆ°å‰è‡‚ä¼¸è‚Œã€‚ç”¨éé ­äº†ï¼Œè‚Œè…±åœ¨æ‰‹è‚˜é™„è‘—é»å°±æœƒç™¼ç‚ï¼Œé€™å°±æ˜¯ç¶²çƒè‚˜ï¼ˆè‚±éª¨å¤–ä¸Šé«ç‚ï¼‰ã€‚"
            },
            {
                question: "æƒ³è¦æ ¹æœ¬æ”¹å–„ã€Œè‡€è‚Œå¤±æ†¶ç—‡ã€ï¼Œåœ¨æ”¾é¬†å®Œç·Šç¹ƒè‚Œè‚‰å¾Œï¼Œæœ€é‡è¦çš„æ­¥é©Ÿæ˜¯ï¼Ÿ",
                options: ["é€²è¡Œè‡€éƒ¨å•Ÿå‹•è¨“ç·´ (Activation)ï¼Œé‡æ–°å»ºç«‹ç¥ç¶“é€£çµ", "ç¹¼çºŒæŒ‰æ‘©ç›´åˆ°å®Œå…¨ä¸ç—›", "å¤šåƒè›‹ç™½è³ª", "ç«‹åˆ»å»è·‘æ­¥"],
                answer: "é€²è¡Œè‡€éƒ¨å•Ÿå‹•è¨“ç·´ (Activation)ï¼Œé‡æ–°å»ºç«‹ç¥ç¶“é€£çµ",
                explanation: "æŒ‰æ‘©åªæ˜¯è§£é™¤æŠ‘åˆ¶ï¼ˆé¬†é–‹ç…è»Šï¼‰ã€‚ä½ å¿…é ˆä¸»å‹•è¨“ç·´ï¼ˆè¸©æ²¹é–€ï¼‰ï¼Œå¤§è…¦æ‰æœƒé‡æ–°å­¸æœƒã€Œå–”ï¼åŸä¾†é€™æ™‚å€™è¦ç”¨å±è‚¡å‡ºåŠ›ã€ã€‚"
            },
            {
                question: "ã€Œè¶³åº•ç­‹è†œç‚ã€æ‚£è€…ï¼Œé™¤äº†æ”¾é¬†è…³åº•ï¼Œæ”¾é¬†å“ªè£¡ä¹Ÿå¾ˆæœ‰å¹«åŠ©ï¼Ÿï¼ˆåŸºæ–¼ç­‹è†œé€£çºŒæ€§ï¼‰",
                options: ["å°è…¿å¾Œå´ï¼ˆè…“è…¸è‚Œã€æ¯”ç›®é­šè‚Œï¼‰", "å¤§è…¿å‰å´", "è…¹è‚Œ", "æ‰‹è‡‚"],
                answer: "å°è…¿å¾Œå´ï¼ˆè…“è…¸è‚Œã€æ¯”ç›®é­šè‚Œï¼‰",
                explanation: "é€™å°±æ˜¯ã€Œæ·ºèƒŒç·šã€çš„æ¦‚å¿µã€‚å°è…¿ç­‹è†œã€é˜¿åŸºé‡Œæ–¯è…±ä¸€è·¯é€£åˆ°è¶³åº•ç­‹è†œã€‚æ”¾é¬†å°è…¿èƒ½æœ‰æ•ˆæ¸›è¼•è¶³åº•çš„æ‹‰æ‰¯å¼µåŠ›ã€‚"
            },
            {
                question: "åœ¨åšã€Œé«–ä¼¸ç›´æ¸¬è©¦ã€æ™‚ï¼Œå¦‚æœå¤§è…¿æŠ¬ä¸é«˜ï¼Œå»ç™¼ç¾è…°æ¤éåº¦æ‹±èµ·ï¼Œé€™ä»£è¡¨ï¼Ÿ",
                options: ["ç”¨è…°éƒ¨ä»£å„Ÿé«–é—œç¯€æ´»å‹•åº¦ä¸è¶³ï¼ˆå‡æ€§æ´»å‹•åº¦ï¼‰", "è…°éƒ¨æŸ”è»Ÿåº¦å¾ˆå¥½", "è‡€è‚Œéå¸¸æœ‰åŠ›", "é€™æ˜¯æ¨™æº–å‹•ä½œ"],
                answer: "ç”¨è…°éƒ¨ä»£å„Ÿé«–é—œç¯€æ´»å‹•åº¦ä¸è¶³ï¼ˆå‡æ€§æ´»å‹•åº¦ï¼‰",
                explanation: "ç•¶å¤§è…¿å› ç‚ºç·Šç¹ƒæŠ¬ä¸èµ·ä¾†ï¼Œèº«é«”æœƒå·åƒæ­¥ï¼Œæ‹±è…°è®“è…¿ã€Œçœ‹èµ·ä¾†ã€æŠ¬å¾ˆé«˜ï¼Œé€™å°±æ˜¯ä»£å„Ÿã€‚"
            },
            {
                question: "ã€Œè…°æ–¹è‚Œã€ä½æ–¼è…°æ¤å…©å´ï¼Œå¦‚æœå®ƒå–®å´å¤ªç·Šï¼Œèº«é«”å¤–è§€å¯èƒ½æœƒå‡ºç¾ä»€éº¼è®ŠåŒ–ï¼Ÿ",
                options: ["éª¨ç›†ä¸€é«˜ä¸€ä½ï¼ˆé•·çŸ­è…³çš„å‡è±¡ï¼‰", "åš´é‡çš„é§èƒŒ", "Oå‹è…¿", "é ­éƒ¨å‰å‚¾"],
                answer: "éª¨ç›†ä¸€é«˜ä¸€ä½ï¼ˆé•·çŸ­è…³çš„å‡è±¡ï¼‰",
                explanation: "è…°æ–¹è‚Œé€£æ¥è‘—è‚‹éª¨å’Œéª¨ç›†ã€‚å®ƒä¸€ç¸®çŸ­ï¼Œå°±æœƒæŠŠåŒå´çš„éª¨ç›†æ‹‰é«˜ï¼Œè®“ä½ è¦ºå¾—é‚£éš»è…³å¥½åƒè®ŠçŸ­äº†ã€‚"
            },
            {
                question: "è‚Œç­‹è†œæ”¾é¬†çš„ä¸»è¦ç›®çš„ã€Œä¸åŒ…å«ã€ä¸‹åˆ—å“ªä¸€é …ï¼Ÿ",
                options: ["æ°¸ä¹…æ€§åœ°å¢åŠ è‚Œè‚‰åŠ›é‡", "æ”¹å–„è¡€æ¶²å¾ªç’°èˆ‡ä»£è¬", "é™ä½è‚Œè‚‰å¼µåŠ›ï¼Œæ¢å¾©å½ˆæ€§", "å¢åŠ é—œç¯€æ´»å‹•åº¦"],
                answer: "æ°¸ä¹…æ€§åœ°å¢åŠ è‚Œè‚‰åŠ›é‡",
                explanation: "æ”¾é¬†æ˜¯è®“è‚Œè‚‰ã€Œæ¢å¾©ã€åˆ°æ­£å¸¸ç‹€æ…‹ã€‚æƒ³è®Šå¼·å£¯ã€è‚Œè‚‰è®Šå¤§ï¼Œå¿…é ˆé é˜»åŠ›è¨“ç·´ï¼ˆé‡è¨“ï¼‰å»ç ´å£å†ä¿®å¾©ï¼ŒæŒ‰æ‘©æœ¬èº«ä¸æœƒé•·è‚Œè‚‰ã€‚"
            },
            {
                question: "ç•¶æˆ‘å€‘åè‘—ï¼ˆé«–é—œç¯€å½æ›² 90 åº¦ï¼‰æ™‚ï¼Œæ¢¨ç‹€è‚Œçš„åŠŸèƒ½æœƒç™¼ç”Ÿä»€éº¼è®ŠåŒ–ï¼Ÿ",
                options: ["åŠŸèƒ½åè½‰ï¼šè®Šæˆè² è²¬å¤§è…¿å¤–å±•èˆ‡å…§æ—‹", "åŠŸèƒ½ä¸è®Šï¼šä¾ç„¶æ˜¯å¤–æ—‹", "å®Œå…¨å¤±å»åŠŸèƒ½", "è®Šæˆè² è²¬ä¼¸ç›´è†è“‹"],
                answer: "åŠŸèƒ½åè½‰ï¼šè®Šæˆè² è²¬å¤§è…¿å¤–å±•èˆ‡å…§æ—‹",
                explanation: "é€™æ˜¯æ¢¨ç‹€è‚Œç‰¹æ®Šçš„ç”Ÿç‰©åŠ›å­¸ç‰¹æ€§ã€‚ç«™è‘—æ˜¯å¤–æ—‹ï¼Œåè‘—è®Šæˆå¤–å±•/å…§æ—‹ã€‚é€™ä¹Ÿæ˜¯ç‚ºä»€éº¼åè‘—ç¿¹äºŒéƒè…¿æœƒæ‹‰æ‰¯åˆ°å®ƒçš„åŸå› ã€‚"
            },
            {
                question: "é—œæ–¼ã€Œæ ¸å¿ƒè‚Œç¾¤ã€çš„åŠŸèƒ½ï¼Œä¸‹åˆ—æ•˜è¿°ä½•è€…æœ€æ ¸å¿ƒï¼Ÿ",
                options: ["ç©©å®šè„Šæ¤èˆ‡éª¨ç›†ï¼Œä½œç‚ºå››è‚¢ç™¼åŠ›çš„ç©©å›ºåº•åº§", "ç·´å‡ºå…­å¡Šè‚Œçµ¦åˆ¥äººçœ‹", "è®“è·‘æ­¥é€Ÿåº¦è®Šå¿«", "å–®ç´”ä¿è­·å…§è‡Ÿ"],
                answer: "ç©©å®šè„Šæ¤èˆ‡éª¨ç›†ï¼Œä½œç‚ºå››è‚¢ç™¼åŠ›çš„ç©©å›ºåº•åº§",
                explanation: "æ ¸å¿ƒå°±åƒèº«é«”çš„ã€Œåœ°åŸºã€ã€‚åœ°åŸºç©©äº†ï¼ˆè„Šæ¤éª¨ç›†ç©©å®šï¼‰ï¼Œæ‰‹è…³æ‰èƒ½æœ‰åŠ›ä¸”å®‰å…¨åœ°åšå‹•ä½œã€‚"
            },
            {
                question: "åšæ·±è¹²æ™‚ï¼Œå¦‚æœã€Œè…³è·Ÿå®¹æ˜“é›¢åœ°ã€ï¼Œé€šå¸¸æš—ç¤ºå“ªè£¡æ´»å‹•åº¦å—é™ï¼Ÿ",
                options: ["è¸é—œç¯€èƒŒå±ˆå—é™ï¼ˆå°è…¿å¾Œå´å¤ªç·Šï¼‰", "é«–é—œç¯€å¤ªç·Š", "å¤§è…¿å‰å´å¤ªç·Š", "è…³è¶¾é ­å¤ªçŸ­"],
                answer: "è¸é—œç¯€èƒŒå±ˆå—é™ï¼ˆå°è…¿å¾Œå´å¤ªç·Šï¼‰",
                explanation: "è¹²ä¸‹å»æ™‚ï¼Œè…³èƒŒè¦èƒ½å¾€ä¸Šå‹¾ï¼ˆèƒŒå±ˆï¼‰ã€‚å¦‚æœå°è…¿å¤ªç·Šå‹¾ä¸èµ·ä¾†ï¼Œèº«é«”ç‚ºäº†ä¿æŒå¹³è¡¡ï¼Œè…³è·Ÿå°±æœƒè¢«è¿«æŠ¬èµ·ä¾†ã€‚"
            }
        ];

        // --- App Logic ---
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let timerInterval;
        let secondsElapsed = 0;

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startQuiz(numQuestions) {
            currentQuestionIndex = 0;
            userAnswers = [];
            secondsElapsed = 0;
            
            // 1. Get Core Questions
            const questionBank = [...coreQuestionBank];
            
            // 2. Shuffle
            const shuffledBank = shuffleArray(questionBank);
            
            // 3. Select Questions (Safe slice)
            const actualNum = Math.min(numQuestions, shuffledBank.length);
            currentQuestions = shuffledBank.slice(0, actualNum).map(q => {
                return {
                    ...q,
                    options: shuffleArray([...q.options])
                };
            });

            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            document.getElementById('quiz-screen').classList.add('flex');
            document.getElementById('quiz-header').classList.remove('hidden');
            document.getElementById('result-screen').classList.add('hidden');

            document.getElementById('total-question-num').innerText = currentQuestions.length;
            startTimer();
            renderQuestion();
        }

        function startTimer() {
            clearInterval(timerInterval);
            document.getElementById('timer').innerText = "00:00";
            timerInterval = setInterval(() => {
                secondsElapsed++;
                const mins = Math.floor(secondsElapsed / 60).toString().padStart(2, '0');
                const secs = (secondsElapsed % 60).toString().padStart(2, '0');
                document.getElementById('timer').innerText = `${mins}:${secs}`;
            }, 1000);
        }

        function renderQuestion() {
            const q = currentQuestions[currentQuestionIndex];
            document.getElementById('current-question-num').innerText = currentQuestionIndex + 1;
            document.getElementById('question-text').innerText = q.question;
            const container = document.getElementById('options-container');
            container.innerHTML = '';

            q.options.forEach(opt => {
                const btn = document.createElement('div');
                btn.className = `option-card w-full p-4 mb-3 rounded-2xl bg-white shadow-sm hover:bg-gray-50 flex items-center gap-4 text-lg md:text-xl font-medium text-gray-600`;
                
                const existingAnswer = userAnswers[currentQuestionIndex];
                if (existingAnswer === opt) {
                    btn.classList.add('selected');
                }

                btn.innerHTML = `
                    <div class="w-6 h-6 md:w-8 md:h-8 rounded-full border-2 border-gray-300 flex-shrink-0 flex items-center justify-center transition-colors">
                        <div class="w-3 h-3 md:w-4 md:h-4 rounded-full bg-[#FF9AA2] ${existingAnswer === opt ? '' : 'hidden'} check-mark"></div>
                    </div>
                    <span class="leading-normal">${opt}</span>
                `;

                btn.onclick = () => selectOption(btn, opt);
                container.appendChild(btn);
            });

            document.getElementById('prev-btn').classList.toggle('hidden', currentQuestionIndex === 0);
            const isLast = currentQuestionIndex === currentQuestions.length - 1;
            document.getElementById('next-btn').classList.toggle('hidden', isLast);
            document.getElementById('submit-btn').classList.toggle('hidden', !isLast);
        }

        function selectOption(btnElement, optionText) {
            const allOpts = document.querySelectorAll('.option-card');
            allOpts.forEach(el => {
                el.classList.remove('selected');
                el.querySelector('.check-mark').classList.add('hidden');
                el.querySelector('.rounded-full.border-2').classList.remove('border-[#FF9AA2]');
            });

            btnElement.classList.add('selected');
            btnElement.querySelector('.check-mark').classList.remove('hidden');
            btnElement.querySelector('.rounded-full.border-2').classList.add('border-[#FF9AA2]');
            userAnswers[currentQuestionIndex] = optionText;
        }

        function nextQuestion() {
            if (currentQuestionIndex < currentQuestions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        function submitQuiz() {
            clearInterval(timerInterval);
            showResults();
        }

        function showResults() {
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('quiz-header').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');

            let score = 0;
            const reviewContainer = document.getElementById('review-container');
            reviewContainer.innerHTML = '';

            currentQuestions.forEach((q, idx) => {
                const userAns = userAnswers[idx];
                const isCorrect = userAns === q.answer;
                if (isCorrect) score += (100 / currentQuestions.length);

                const reviewItem = document.createElement('div');
                reviewItem.className = "bg-white p-6 rounded-3xl shadow-sm border border-gray-100";
                
                reviewItem.innerHTML = `
                    <div class="flex items-start gap-4 mb-4">
                        <span class="bg-${isCorrect ? '[#B5EAD7]' : '[#FFB7B2]'} text-${isCorrect ? 'green' : 'red'}-700 px-3 py-1 rounded-lg font-bold text-sm whitespace-nowrap mt-1">
                            ${isCorrect ? 'æ­£ç¢º' : 'éŒ¯èª¤'}
                        </span>
                        <h4 class="text-xl font-bold text-gray-800 leading-normal">Q${idx + 1}. ${q.question}</h4>
                    </div>
                    <div class="space-y-2 mb-4 pl-2 md:pl-14">
                        <div class="flex items-center gap-2 ${isCorrect ? 'text-green-600 font-bold' : 'text-red-500 line-through decoration-2'}">
                            <span class="text-sm text-gray-400">æ‚¨çš„ç­”æ¡ˆï¼š</span>
                            <span>${userAns || "æœªä½œç­”"}</span>
                        </div>
                        ${!isCorrect ? `
                        <div class="flex items-center gap-2 text-green-600 font-bold">
                            <span class="text-sm text-gray-400">æ­£ç¢ºç­”æ¡ˆï¼š</span>
                            <span>${q.answer}</span>
                        </div>
                        ` : ''}
                    </div>
                    <div class="bg-yellow-50 p-4 rounded-xl text-gray-600 text-base leading-relaxed border-l-4 border-[#FFFFB5] ml-0 md:ml-14">
                        <span class="font-bold text-gray-500">è§£æï¼š</span>${q.explanation}
                    </div>
                `;
                reviewContainer.appendChild(reviewItem);
            });

            // Update Score & Time
            const finalScore = Math.round(score);
            document.getElementById('score-display').innerText = finalScore;
            
            const mins = Math.floor(secondsElapsed / 60).toString().padStart(2, '0');
            const secs = (secondsElapsed % 60).toString().padStart(2, '0');
            document.getElementById('time-display').innerText = `${mins}:${secs}`;

            // Pass/Fail Logic
            const badge = document.getElementById('pass-fail-badge');
            if (finalScore >= 70) {
                badge.innerText = "ğŸ‰ æ­å–œåŠæ ¼";
                badge.className = "inline-block px-8 py-3 rounded-full text-2xl font-black mb-6 bg-[#B5EAD7] text-teal-800 animate-bounce";
            } else {
                badge.innerText = "ğŸ’ª å†æ¥å†å²";
                badge.className = "inline-block px-8 py-3 rounded-full text-2xl font-black mb-6 bg-[#FFB7B2] text-red-800";
            }
        }

        function restartQuiz() {
            document.getElementById('result-screen').classList.add('hidden');
            document.getElementById('start-screen').classList.remove('hidden');
        }
    </script>
</body>
</html>
